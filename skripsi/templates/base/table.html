<link
  rel="stylesheet"
  type="text/css"
  href="https://unpkg.com/bootstrap-table@1.15.5/dist/bootstrap-table.min.css"
/>
<!-- <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css" /> -->
<link
  rel="stylesheet"
  type="text/css"
  href="https://cdn.datatables.net/1.10.21/css/dataTables.bootstrap4.min.css"
/>
<script src="https://unpkg.com/bootstrap-table@1.15.5/dist/bootstrap-table.min.js"></script>

<div class="container col-md-11 table-responsive">
  <table id="table-data" class="table">
    <caption>
      Hasil clustering
    </caption>
    <thead class="thead bg-info text-light">
      <tr>
        <th>KABUPATEN</th>
        <th>PEKERJAAN</th>
        <th>OBJECT</th>
        <th>TENOR</th>
        <th>OTR</th>
        <th>cluster</th>
      </tr>
    </thead>
    <tbody></tbody>

    <tfoot>
      <tr>
        <th>KABUPATEN</th>
        <th>PEKERJAAN</th>
        <th>OBJECT</th>
        <th>TENOR</th>
        <th>OTR</th>
        <th>cluster</th>
      </tr>
    </tfoot>
  </table>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap4.min.js"></script>

{% block js %}
<script>
  $(document).ready(function () {
    $("#table-data").DataTable({
      processing: true,

      // "serverSide": true,
      ajax: "http://127.0.0.1:8000/data-json",
      // scrollY:        400,
      // scrollCollapse: true,
      // scroller:       true,
      // "columnDefs" : [{
      //     "defaultContent": "-",
      // }],

      columns: [
        { data: "KABUPATEN" },
        { data: "PEKERJAAN" },
        { data: "OBJECT" },
        { data: "TENOR" },
        { data: "OTR" },
        { data: "cluster" },
      ],
      initComplete: function () {
        this.api()
          .columns()
          .every(function () {
            var column = this;
            var select = $(
              '<select><option value="">Show all</option></select>'
            )
              .appendTo($(column.footer()).empty())
              .on("change", function () {
                var val = $.fn.dataTable.util.escapeRegex($(this).val());

                column.search(val ? "^" + val + "$" : "", true, false).draw();
              });

            column
              .data()
              .unique()
              .sort()
              .each(function (d, j) {
                select.append('<option value="' + d + '">' + d + "</option>");
              });
          });
      },
    });
  });
</script>

{% endblock js %}
